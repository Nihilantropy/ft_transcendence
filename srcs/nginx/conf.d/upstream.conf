# /**
#  * @brief Upstream definitions for backend services
#  * 
#  * @description Defines backend service endpoints for load balancing
#  *              and health checks. Easily extendable for multiple backend instances.
#  */

# Backend API upstream
upstream backend_api {
    # Single backend instance for now
    server backend:3000;
    
    # Health check settings
    keepalive 32;
    keepalive_requests 100;
    keepalive_timeout 60s;
    
    # Future: Add multiple backend instances for load balancing
    # server backend-1:3000 weight=1 max_fails=3 fail_timeout=30s;
    # server backend-2:3000 weight=1 max_fails=3 fail_timeout=30s;
}

# WebSocket upstream (can be same as API or separate)
upstream backend_websocket {
    server backend:3000;
    keepalive 32;
}

# Future: Additional services
# upstream blockchain_service {
#     server blockchain:8545;
# }
# 
# upstream vault_service {
#     server vault:8200;
# }